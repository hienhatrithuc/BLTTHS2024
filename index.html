
<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tra cứu Bộ luật Tố tụng Hình sự</title>
<style>
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; margin:0; padding:20px; background-color:#f5f5f5;}
#search-container { background:white; padding:20px; border-radius:12px; box-shadow:0 4px 6px rgba(0,0,0,0.1); margin-bottom:20px; display:flex; flex-direction:column; align-items:center;}
#search-box, #chapter-select { width:90%; padding:10px; font-size:18px; border:1px solid #ccc; border-radius:8px; margin-bottom:10px;}
#search-btn { padding:10px 20px; font-size:18px; border:none; background-color:#007aff; color:white; border-radius:8px; cursor:pointer; width:90%;}
#search-btn:hover { background-color:#005bb5;}
#results { margin-top:20px;}
.highlight { background-color:yellow; font-weight:bold;}
.article { background:white; padding:20px; margin-bottom:20px; border-radius:12px; box-shadow:0 2px 4px rgba(0,0,0,0.05);}
#nav-buttons { margin-top:10px; display:flex; justify-content:center; gap:10px;}
button.nav-btn { padding:10px 20px; font-size:16px; cursor:pointer; background-color:#007aff; color:white; border:none; border-radius:8px;}
#counter { margin-top:10px; font-size:16px; text-align:center;}
</style>
</head>
<body>

<div id="search-container">
<select id="chapter-select">
<option value="">Tất cả chương</option>
</select>
<input type="text" id="search-box" placeholder="Nhập từ khóa tìm kiếm...">
<button id="search-btn">Tìm kiếm</button>
<div id="nav-buttons">
<button id="prev-btn" class="nav-btn">Previous</button>
<span id="counter"></span>
<button id="next-btn" class="nav-btn">Next</button>
</div>
</div>

<div id="results"></div>

<script>
let articles = [];
let matches = [];
let currentIndex = 0;
const chapters = ["Chương I. PHẠM VI ĐIỀU CHỈNH, NHIỆM VỤ, HIỆU LỰC CỦA BỘ LUẬT TỐ TỤNG HÌNH SỰ", "Chương II. NHỮNG NGUYÊN TẮC CƠ BẢN", "Chương III. CƠ QUAN CÓ THẨM QUYỀN TIẾN HÀNH TỐ TỤNG, NGƯỜI CÓ THẨM QUYỀN TIẾN HÀNH TỐ TỤNG", "Chương IV. NGƯỜI THAM GIA TỐ TỤNG", "Chương V. BÀO CHỮA, BẢO VỆ QUYỀN VÀ LỢI ÍCH HỢP PHÁP CỦA BỊ HẠI, ĐƯƠNG SỰ", "Chương VI. CHỨNG MINH VÀ CHỨNG CỨ", "Chương VII. BIỆN PHÁP NGĂN CHẶN, BIỆN PHÁP CƯỠNG CHẾ", "Chương VIII. HỒ SƠ VỤ ÁN, VĂN BẢN TỐ TỤNG, THỜI HẠN VÀ CHI PHÍ TỐ TỤNG", "Chương IX. KHỞI TỐ VỤ ÁN HÌNH SỰ", "Chương X. NHỮNG QUY ĐỊNH CHUNG VỀ ĐIỀU TRA VỤ ÁN HÌNH SỰ", "Chương XI. KHỞI TỐ BỊ CAN VÀ HỎI CUNG BỊ CAN", "Chương XII. LẤY LỜI KHAI NGƯỜI LÀM CHỨNG, NGƯỜI BỊ HẠI, NGUYÊN ĐƠN DÂN SỰ, BỊ ĐƠN DÂN SỰ, NGƯỜI CÓ QUYỀN LỢI, NGHĨA VỤ LIÊN QUAN ĐẾN VỤ ÁN, ĐỐI CHẤT VÀ NHẬN DẠNG", "Chương XIII. KHÁM XÉT, THU GIỮ, TẠM GIỮ TÀI LIỆU, ĐỒ VẬT", "Chương XIV. KHÁM NGHIỆM HIỆN TRƯỜNG, KHÁM NGHIỆM TỬ THI, XEM XÉT DẤU VẾT TRÊN THÂN THỂ, THỰC NGHIỆM ĐIỀU TRA", "Chương XV. GIÁM ĐỊNH VÀ ĐỊNH GIÁ TÀI SẢN", "Chương XVI. BIỆN PHÁP ĐIỀU TRA TỐ TỤNG ĐẶC BIỆT", "Chương XVII. TẠM ĐÌNH CHỈ ĐIỀU TRA VÀ KẾT THÚC ĐIỀU TRA", "Chương XVIII. NHỮNG QUY ĐỊNH CHUNG", "Chương XIX. QUYẾT ĐỊNH VIỆC TRUY TỐ BỊ CAN", "Chương XX. NHỮNG QUY ĐỊNH CHUNG", "Chương XXI. XÉT XỬ SƠ THẨM", "Chương XXII. XÉT XỬ PHÚC THẨM", "Chương XXIII. BẢN ÁN, QUYẾT ĐỊNH ĐƯỢC THI HÀNH NGAY VÀ THẨM QUYỀN RA QUYẾT ĐỊNH THI HÀNH ÁN", "Chương XXIV. MỘT SỐ THỦ TỤC VỀ THI HÀNH ÁN TỬ HÌNH, XÉT THA TÙ TRƯỚC THỜI HẠN CÓ ĐIỀU KIỆN, XÓA ÁN TÍCH", "Chương XXV. THỦ TỤC GIÁM ĐỐC THẨM", "Chương XXVI. THỦ TỤC TÁI THẨM", "Chương XXVII. THỦ TỤC XEM XÉT LẠI QUYẾT ĐỊNH CỦA HỘI ĐỒNG THẨM PHÁN TÒA ÁN NHÂN DÂN TỐI CAO", "Chương XXVIII. THỦ TỤC TỐ TỤNG ĐỐI VỚI NGƯỜI DƯỚI 18 TUỔI", "Chương XXIX. THỦ TỤC TỐ TỤNG TRUY CỨU TRÁCH NHIỆM HÌNH SỰ PHÁP NHÂN", "Chương XXX. THỦ TỤC ÁP DỤNG BIỆN PHÁP BẮT BUỘC CHỮA BỆNH", "Chương XXXI. THỦ TỤC RÚT GỌN", "Chương XXXII. XỬ LÝ CÁC HÀNH VI CẢN TRỞ HOẠT ĐỘNG TỐ TỤNG HÌNH SỰ", "Chương XXXIII. KHIẾU NẠI, TỐ CÁO TRONG TỐ TỤNG HÌNH SỰ", "Chương XXXIV. BẢO VỆ NGƯỜI TỐ GIÁC TỘI PHẠM, NGƯỜI LÀM CHỨNG, BỊ HẠI VÀ NGƯỜI THAM GIA TỐ TỤNG KHÁC", "Chương XXXV. NHỮNG QUY ĐỊNH CHUNG", "Chương XXXVI. MỘT SỐ HOẠT ĐỘNG HỢP TÁC QUỐC TẾ"];

fetch('bo_luat_to_tung_hinh_su_clean.json')
.then(response => response.json())
.then(data => {
    articles = data;
    populateChapters();
});

function populateChapters() {
    const chapterSelect = document.getElementById('chapter-select');
    chapters.forEach(chapter => {
        const option = document.createElement('option');
        option.value = chapter.split('.')[0].trim();
        option.textContent = chapter;
        chapterSelect.appendChild(option);
    });
}

function highlightKeyword(text, keyword) {
    let regex = new RegExp('(' + keyword + ')', 'gi');
    return text.replace(regex, '<span class="highlight">$1</span>');
}

function displayResult(index) {
    if (matches.length > 0) {
        const {dieu, noi_dung} = matches[index];
        document.getElementById('results').innerHTML = `
        <div class="article">
            <h3>${dieu}</h3>
            <p>${noi_dung}</p>
        </div>`;
        document.getElementById('counter').innerText = `${index + 1} / ${matches.length} kết quả`;
    } else {
        document.getElementById('results').innerHTML = '<p>Không tìm thấy kết quả.</p>';
        document.getElementById('counter').innerText = '';
    }
}

function search() {
    const keyword = document.getElementById('search-box').value.trim();
    const selectedChapter = document.getElementById('chapter-select').value;
    if (!keyword) {
        document.getElementById('results').innerHTML = '';
        matches = [];
        document.getElementById('counter').innerText = '';
        return;
    }
    matches = articles
        .filter(article => {
            if (!selectedChapter) return true;
            return article.noi_dung.includes(selectedChapter);
        })
        .map(article => ({
            dieu: highlightKeyword(article.dieu, keyword),
            noi_dung: highlightKeyword(article.noi_dung, keyword)
        }))
        .filter(article => article.dieu.includes('<span') || article.noi_dung.includes('<span'));

    currentIndex = 0;
    displayResult(currentIndex);
}

document.getElementById('search-btn').addEventListener('click', search);
document.getElementById('prev-btn').addEventListener('click', () => {
    if (currentIndex > 0) { currentIndex--; displayResult(currentIndex); }
});
document.getElementById('next-btn').addEventListener('click', () => {
    if (currentIndex < matches.length - 1) { currentIndex++; displayResult(currentIndex); }
});
</script>

</body>
</html>
